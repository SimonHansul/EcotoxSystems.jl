<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>EcotoxSystems.jl · EcotoxSystems.jl</title><meta name="title" content="EcotoxSystems.jl · EcotoxSystems.jl"/><meta property="og:title" content="EcotoxSystems.jl · EcotoxSystems.jl"/><meta property="twitter:title" content="EcotoxSystems.jl · EcotoxSystems.jl"/><meta name="description" content="Documentation for EcotoxSystems.jl."/><meta property="og:description" content="Documentation for EcotoxSystems.jl."/><meta property="twitter:description" content="Documentation for EcotoxSystems.jl."/><script data-outdated-warner src="assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="assets/documenter.js"></script><script src="search_index.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href>EcotoxSystems.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li class="is-active"><a class="tocitem" href>EcotoxSystems.jl</a><ul class="internal"><li><a class="tocitem" href="#Quickstart"><span>Quickstart</span></a></li><li><a class="tocitem" href="#API"><span>API</span></a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>EcotoxSystems.jl</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>EcotoxSystems.jl</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/SimonHansul/EcotoxSystems.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/SimonHansul/EcotoxSystems.jl/blob/main/docs/src/index.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="EcotoxSystems.jl"><a class="docs-heading-anchor" href="#EcotoxSystems.jl">EcotoxSystems.jl</a><a id="EcotoxSystems.jl-1"></a><a class="docs-heading-anchor-permalink" href="#EcotoxSystems.jl" title="Permalink"></a></h1><h2 id="Quickstart"><a class="docs-heading-anchor" href="#Quickstart">Quickstart</a><a id="Quickstart-1"></a><a class="docs-heading-anchor-permalink" href="#Quickstart" title="Permalink"></a></h2><p>To get acquainted with using <code>EcotoxSystems.jl</code>, you can use the default model and default parameters. &lt;br&gt;</p><p>Let&#39;s start with simulating individual life-history based on the default parameters:</p><pre><code class="language-Julia hljs">p = deepcopy(EcotoxSystems.defaultparams)
p.glb.t_max = 21.
sim = EcotoxSystems.ODE_simulator(p)
first(sim, 5)</code></pre><p>Here, we first create a copy of the default parameters.  These contain two components:</p><ul><li><code>glb</code> for <em>global</em> parameters. This includes simulation settings like the maximum simulated time-span, and forcings such as the food input rate <code>dX_in</code>.</li><li><code>spc</code> for <em>species-specific</em> parameters. For the default model, these are DEB-TKTD and some auxiliary parameters. </li></ul><p>The second line, </p><pre><code class="language-Julia hljs">p.glb.t_max = 21.</code></pre><p>adjusts the simulated time-span. &lt;br&gt; With </p><pre><code class="language-Julia hljs">sim = EcotoxSystems.ODE_simulator(p)</code></pre><p>, we then simulate the model. &lt;br&gt; <code>ODE_simulator</code> is the central function to execute models which are purely ODE-based. &lt;br&gt; The output `<code>sim</code> is a <code>DataFrame</code> containing all state variables over time. &lt;br&gt; Storing the solution in a <code>DataFrame</code> can be convenient, but, for simple models, consumes a considerable proportion of computation time.  It is possible to skip the conversion and retrieve the <code>ODEsolution</code> instead by setting <code>returntype=EcoxSystems.odesol</code>. &lt;br&gt;</p><p>Instead of simulating the life-history of a single individual, we can also simulate population dynamics.  To do so for the default model, we need to adjust the global parameters,  set plausible value for the starvation parameters (which were irrelevant before),  and call <code>IBM_simulator</code>:</p><pre><code class="language-Julia hljs">using Distributions, ProgressMeter

p = deepcopy(EcotoxSystems.defaultparams)

# adjusting global parameters

p.glb.t_max = 365. # simulated timespan [d]
p.glb.V_patch = 0.5 # simulated volume [L]
p.glb.dX_in = 10_000 # provide more food 

# adjusting species-level parameters

p.spc.Z = Truncated(Normal(1, 0.1), 0, Inf) # induce individual variability 
p.spc.S_rel_crit = 0.66
p.spc.h_S = -log(0.5)

sims = @replicates EcotoxSystems.IBM_simulator(p, showinfo = Inf) 10 # run replicated simulations
</code></pre><p>To deviate from the default model, there are a number of components to tweak in order to fully specify the system:</p><ul><li><code>init_global_statevars</code>: A function that initializes global state variables.</li><li><code>global_ode!</code>: ODE-portion of the dynamics of global states.</li><li><code>global_rules!</code>: Rule-based portion of the dynamics of global states. </li><li><code>init_individual_statevars</code>: A function that initializes individual-level state variables. </li><li><code>individual_ode!</code>: ODE-portion of the dynamics of individual-level states. </li><li><code>individual_rules!</code>: Rule-based portion of the dynamics of individual-level states.</li><li><code>gen_ind_params</code>:  A function that translates species-specicif parameters <code>spc</code> into individual-level parameters <code>ind</code>. The default is <code>generate_individual_params</code> and is generic, apart from assuming that <code>spc</code> contains an entry for <code>Z</code> and <code>propagate_zoom</code>.</li></ul><h2 id="API"><a class="docs-heading-anchor" href="#API">API</a><a id="API-1"></a><a class="docs-heading-anchor-permalink" href="#API" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="EcotoxSystems.defaultparams" href="#EcotoxSystems.defaultparams"><code>EcotoxSystems.defaultparams</code></a> — <span class="docstring-category">Constant</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>Default parameter object</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SimonHansul/EcotoxSystems.jl/blob/ad003069221e97ecc2be194a27483c6c35239d9d/src/default_params.jl#L55-L57">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="EcotoxSystems.DEBODE!-NTuple{4, Any}" href="#EcotoxSystems.DEBODE!-NTuple{4, Any}"><code>EcotoxSystems.DEBODE!</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>DEB-ODE model with arbitrary number of stressors, assuming IA to compute combined effects. </p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SimonHansul/EcotoxSystems.jl/blob/ad003069221e97ecc2be194a27483c6c35239d9d/src/default_derivatives.jl#L343-L345">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="EcotoxSystems.DEBkiss_individual!-NTuple{4, Any}" href="#EcotoxSystems.DEBkiss_individual!-NTuple{4, Any}"><code>EcotoxSystems.DEBkiss_individual!</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>Individual-level part of the DEB-ODE model with arbitrary number of stressors, assuming IA to compute combined effects.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SimonHansul/EcotoxSystems.jl/blob/ad003069221e97ecc2be194a27483c6c35239d9d/src/default_derivatives.jl#L332-L334">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="EcotoxSystems.DEBkiss_physiology!-NTuple{4, Any}" href="#EcotoxSystems.DEBkiss_physiology!-NTuple{4, Any}"><code>EcotoxSystems.DEBkiss_physiology!</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">DEBkiss!(du, u, p, t)::Nothing</code></pre><p>Dynamics of DEBkiss model with maturity and explicit simulation of resource dynamics.</p><p>The density of structure is ignored, and instead <code>S^(2/3)</code> is applied for surface-area scaling.  This affects the dimension of <code>dI_max</code>, but has no effect on the model dynamics.</p><p>If model output is to be compared to length data, a statistical weight-lenght relationship  has to be applied to the model output.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SimonHansul/EcotoxSystems.jl/blob/ad003069221e97ecc2be194a27483c6c35239d9d/src/default_derivatives.jl#L283-L293">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="EcotoxSystems.Euler!-Tuple{ComponentArrays.ComponentVector, ComponentArrays.ComponentVector, Real}" href="#EcotoxSystems.Euler!-Tuple{ComponentArrays.ComponentVector, ComponentArrays.ComponentVector, Real}"><code>EcotoxSystems.Euler!</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">Euler!(u::ComponentVector, du::ComponentVector, dt::Real)::Nothing</code></pre><p>Apply Euler scheme to state variables.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SimonHansul/EcotoxSystems.jl/blob/ad003069221e97ecc2be194a27483c6c35239d9d/src/ibmschedules.jl#L58-L62">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="EcotoxSystems.IBM_simulator-Tuple{ComponentArrays.ComponentVector}" href="#EcotoxSystems.IBM_simulator-Tuple{ComponentArrays.ComponentVector}"><code>EcotoxSystems.IBM_simulator</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">IBM_simulator(
    p::ComponentVector; 
    global_ode! = DEBODE_global!,
    global_rules! = default_global_rules!,
    init_global_statevars = initialize_global_statevars,
    individual_ode! = DEBkiss_individual!,
    individual_rules! = default_individual_rules!,
    init_individual_statevars = initialize_individual_statevars,
    dt = 1/24, 
    saveat = 1,
    record_individuals = true,
    showinfo::Number = Inf
)</code></pre><p>Simulate the individual-based version of the default model. </p><pre><code class="nohighlight hljs">using EcotoxSystems
p = DEB.params()
sim = DEB.IBMsimulator(p)</code></pre><p>For explanation of arguments, see <code>IndividualBasedModel</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SimonHansul/EcotoxSystems.jl/blob/ad003069221e97ecc2be194a27483c6c35239d9d/src/simulators.jl#L89-L113">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="EcotoxSystems.ODE_simulator-Tuple{ComponentArrays.ComponentVector}" href="#EcotoxSystems.ODE_simulator-Tuple{ComponentArrays.ComponentVector}"><code>EcotoxSystems.ODE_simulator</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">ODE_simulator(
    p::ComponentVector; 
    alg = Tsit5(),
    saveat = 1,
    reltol = 1e-6,
    model = DEBODE!,
    statevars_init = initialize_statevars,
    gen_ind_params = generate_individual_params,
    param_links::Union{Nothing,NamedTuple} = nothing,  
    callbacks = DEBODE_callbacks,
    returntype::ReturnType = dataframe,
    kwargs...
)</code></pre><p>Run the model as ODE system.  This function is essentially a wrapper around <code>OrdinaryDiffEq.solve</code> with additional input and output processing.</p><p>args:</p><ul><li><code>p</code>: Parameters, given as component vector. </li></ul><p>At least two components are given: <code>glb</code> for global parameters,  <code>spc</code> for species-level parameters. <code>glb</code> as to contain an entry <code>t_max</code> for the maximum simulation time.  <code>spc</code> has to contain entries <code>Z</code> and <code>propagate_zoom</code> for the zoom factor and the parameters which are affected by the zoom factor.</p><p>kwargs:</p><p>The following kwargs are used internally by <code>OrdinaryDiffEq.solve</code>. See <code>OrdinaryDiffEq</code> documentation for more information.</p><ul><li><code>alg</code>: ODE solving algorithm to use.. </li><li><code>saveat</code>: Interval or time-points at which to save the solution. Default is 1.</li><li><code>reltol</code>: Relative tolerance of ODE solution, default is 1e-6.</li><li><code>model</code>: ODE system to solve. </li><li><code>callbacks</code>: A callback set, i.e. pairs of conditions and events. Used to handle discontinuities.  </li></ul><p>In addition we have some kwargs that are used to further process inputs and outputs: </p><ul><li><code>statevars_init</code>: Function that defines initial state variables as component vector. Components typically match those in the parameter vector. </li><li>`gen<em>ind</em>params: Function that converts species-level parameters to individual-level parameters, for example by replacing parameters which are given as distributions with a random sample from the distribution. The inputs and outputs of this function should contain all components. </li><li><code>returntype</code>: Indicating of how to return the result. Currently allowed are <code>dataframe</code> (complete solution converted to a <code>DataFrame</code>) and <code>odesol</code> (the ODE solution object as returned by <code>OrdinaryDiffEq</code>). Default is <code>dataframe</code>.</li></ul><p>Run a model as purely ODE-based system: </p><pre><code class="language-Julia hljs">using EcotoxSystems
sim = DEB.ODE_simulator(EcotoxSystems.defaultparams(p))</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SimonHansul/EcotoxSystems.jl/blob/ad003069221e97ecc2be194a27483c6c35239d9d/src/simulators.jl#L7-L55">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="EcotoxSystems.TKTD_mix_IA!-NTuple{4, Any}" href="#EcotoxSystems.TKTD_mix_IA!-NTuple{4, Any}"><code>EcotoxSystems.TKTD_mix_IA!</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">function TKTD_mix_IA!(du, u, p, t)::Nothing</code></pre><p>Mixture-TKTD for an arbitrary number of stressors, assuming Independent Action.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SimonHansul/EcotoxSystems.jl/blob/ad003069221e97ecc2be194a27483c6c35239d9d/src/default_derivatives.jl#L92-L96">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="EcotoxSystems.calc_SL_max-Tuple{ComponentArrays.ComponentVector}" href="#EcotoxSystems.calc_SL_max-Tuple{ComponentArrays.ComponentVector}"><code>EcotoxSystems.calc_SL_max</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">calc_SL_max(spc::ComponentVector)::Float64</code></pre><p>Calculate maximum structural length slmax [m^(1/3)]</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SimonHansul/EcotoxSystems.jl/blob/ad003069221e97ecc2be194a27483c6c35239d9d/src/traits.jl#L4-L7">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="EcotoxSystems.calc_S_max-Tuple{ComponentArrays.ComponentVector}" href="#EcotoxSystems.calc_S_max-Tuple{ComponentArrays.ComponentVector}"><code>EcotoxSystems.calc_S_max</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">calc_S_max(spc::ComponentVector)::Float64</code></pre><p>Calculate maximum structural mass smax [m]</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SimonHansul/EcotoxSystems.jl/blob/ad003069221e97ecc2be194a27483c6c35239d9d/src/traits.jl#L12-L15">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="EcotoxSystems.clipneg-Tuple{Float64}" href="#EcotoxSystems.clipneg-Tuple{Float64}"><code>EcotoxSystems.clipneg</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>Clip negative values at 0 as a continuous function, using <code>sig</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SimonHansul/EcotoxSystems.jl/blob/ad003069221e97ecc2be194a27483c6c35239d9d/src/default_derivatives.jl#L30-L32">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="EcotoxSystems.dI_embryo-NTuple{4, Float64}" href="#EcotoxSystems.dI_embryo-NTuple{4, Float64}"><code>EcotoxSystems.dI_embryo</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">dI_embryo(
    embryo::Float64,
    S::Float64,
    dI_max_emb::Float64,
    y_T::Float64
    )::Float64</code></pre><p>Resource ingestion by embryos, i.e. uptake of yolk/vitellus. </p><p><strong>Arguments</strong></p><ul><li><code>embryo</code>: State variable indicating whether current state is embryonic</li><li><code>S</code>: Structural mass</li><li><code>dI_max_emb</code>: Maxmimum size-specific ingestion rate of embryos</li><li><code>y_T</code>: Temperature coefficient</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SimonHansul/EcotoxSystems.jl/blob/ad003069221e97ecc2be194a27483c6c35239d9d/src/default_derivatives.jl#L186-L202">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="EcotoxSystems.dS-NTuple{6, Float64}" href="#EcotoxSystems.dS-NTuple{6, Float64}"><code>EcotoxSystems.dS</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">dS(
    kappa::Float64,
    dA::Float64, 
    dM::Float64, 
    eta_SA::Float64,
    y_G::Float64,
    eta_AS::Float64
    )::Float64</code></pre><p>Structural growth rate. </p><p><strong>Arguments</strong></p><ul><li><code>kappa</code>: Allocation fraction to somatic growth and maintenance</li><li><code>dA</code>: Assimilation rate</li><li><code>dM</code>: Somatic maintenance rate </li><li><code>eta_SA</code>: Growth efficiency (yield of somatic mass on assimilates)</li><li><code>y_G</code>: Relative response of growth efficiency</li><li><code>eta_SA</code>: Shrinking efficiency</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SimonHansul/EcotoxSystems.jl/blob/ad003069221e97ecc2be194a27483c6c35239d9d/src/default_derivatives.jl#L148-L168">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="EcotoxSystems.default_global_rules!-Tuple{Any}" href="#EcotoxSystems.default_global_rules!-Tuple{Any}"><code>EcotoxSystems.default_global_rules!</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">default_global_rules!(m)</code></pre><p>Global rule-based portion of the default model. </p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SimonHansul/EcotoxSystems.jl/blob/ad003069221e97ecc2be194a27483c6c35239d9d/src/ibmschedules.jl#L129-L133">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="EcotoxSystems.default_individual_rules!-Tuple{EcotoxSystems.AbstractDEBIndividual, EcotoxSystems.AbstractDEBIBM}" href="#EcotoxSystems.default_individual_rules!-Tuple{EcotoxSystems.AbstractDEBIndividual, EcotoxSystems.AbstractDEBIBM}"><code>EcotoxSystems.default_individual_rules!</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">default_individual_rules(a::AbstractDEBIndividual, m::AbstractDEBIBM)::Nothing</code></pre><p>Defines the default rule-based portion for DEBIndividuals. &lt;br&gt;</p><p>The event functions which are used as callbacks during ODE solving are here re-used to apply rules for life stage transitions.</p><p>A crude rule for starvation mortality is implemented, applying a constant hazard rate of a certain relative amount of structural mass is lost.</p><p>Reproduction is assumed to occur in fixed time intervals, according to <code>spc.tau_R</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SimonHansul/EcotoxSystems.jl/blob/ad003069221e97ecc2be194a27483c6c35239d9d/src/individuals.jl#L51-L61">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="EcotoxSystems.exposure-Union{Tuple{R}, Tuple{Function, ComponentArrays.ComponentVector, Matrix{R}}} where R&lt;:Real" href="#EcotoxSystems.exposure-Union{Tuple{R}, Tuple{Function, ComponentArrays.ComponentVector, Matrix{R}}} where R&lt;:Real"><code>EcotoxSystems.exposure</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">exposure(
    simulator::Function, 
    p::ComponentVector, 
    C_Wmat::Matrix{R}
) where R &lt;: Real</code></pre><p>Simulate exposure to an arbitrary number of stressors over a Matrix of constant exposure concentrations <code>C_Wmat</code>. </p><p>The exposure matrix columns are stressors, the rows are treatments.  That means, to simulate a single-stressor experiment, do </p><pre><code class="language-Julia hljs">C_Wmat = [0.; 1.; 2;]</code></pre><p>, creating a 1 x 3 matrix with exposure concentrations 0, 1 and 2. </p><p>A single treatment with multiple stressors can be defined as </p><pre><code class="language-Julia hljs">C_Wmat = [0 1 2;]</code></pre><p>, creating a 1 x 3 matrix. Here, we would have three stressors with the simultaneous exposure concentrations 0,1,2. &lt;br&gt;</p><p>Thus, defining four treatments for two stressors looks like this:</p><pre><code class="language-Julia hljs">C_Wmat = [0.0 0.0; 0.0 0.5; 1.0 0.0; 0.5 1.0]</code></pre><p>This exposure matrix corresponds to a ray design with constant exposure ratios.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SimonHansul/EcotoxSystems.jl/blob/ad003069221e97ecc2be194a27483c6c35239d9d/src/simulators.jl#L298-L331">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="EcotoxSystems.filter_individuals!-Tuple{EcotoxSystems.AbstractDEBIBM}" href="#EcotoxSystems.filter_individuals!-Tuple{EcotoxSystems.AbstractDEBIBM}"><code>EcotoxSystems.filter_individuals!</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">filter_individuals!(m::AbstractDEBIBM)</code></pre><p>Remove individuals which have been flagged to die after the current time-step. </p><p>Individuals for which the condition <code>u.ind.cause_of_death == 0</code> applies are retained.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SimonHansul/EcotoxSystems.jl/blob/ad003069221e97ecc2be194a27483c6c35239d9d/src/ibmschedules.jl#L102-L108">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="EcotoxSystems.generate_individual_params-Tuple{ComponentArrays.ComponentVector}" href="#EcotoxSystems.generate_individual_params-Tuple{ComponentArrays.ComponentVector}"><code>EcotoxSystems.generate_individual_params</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">generate_individual_params(p::ComponentVector; kwargs...)

Generate individual-specific parameter set from species-specific parameter set.</code></pre><p>If a parameter entry is a distribution, a random sample is taken. </p><p>This also works for Vectors of distributions.  The kwargs need to be supplemented with additional components if there are more than just a global and an individual-level component.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SimonHansul/EcotoxSystems.jl/blob/ad003069221e97ecc2be194a27483c6c35239d9d/src/default_params.jl#L107-L115">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="EcotoxSystems.get_global_statevars!-Tuple{EcotoxSystems.AbstractDEBIndividual, EcotoxSystems.AbstractDEBIBM}" href="#EcotoxSystems.get_global_statevars!-Tuple{EcotoxSystems.AbstractDEBIndividual, EcotoxSystems.AbstractDEBIBM}"><code>EcotoxSystems.get_global_statevars!</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">get_global_statevars!(a::AbstractDEBIndividual, m::AbstractDEBIBM)::Nothing</code></pre><p>Retrieve global state variables and derivatives for use in the individual-level model step.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SimonHansul/EcotoxSystems.jl/blob/ad003069221e97ecc2be194a27483c6c35239d9d/src/ibmschedules.jl#L6-L10">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="EcotoxSystems.groupedlineplot!-Tuple" href="#EcotoxSystems.groupedlineplot!-Tuple"><code>EcotoxSystems.groupedlineplot!</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">groupedlineplot(x, y, g, q; estimator)</code></pre><p>Version of lineplot with additional grouping variable <code>g</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SimonHansul/EcotoxSystems.jl/blob/ad003069221e97ecc2be194a27483c6c35239d9d/src/plotrecipes.jl#L62-L66">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="EcotoxSystems.groupedlineplot!-Tuple{RecipesBase.AbstractPlot, Vararg{Any}}" href="#EcotoxSystems.groupedlineplot!-Tuple{RecipesBase.AbstractPlot, Vararg{Any}}"><code>EcotoxSystems.groupedlineplot!</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">groupedlineplot(x, y, g, q; estimator)</code></pre><p>Version of lineplot with additional grouping variable <code>g</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SimonHansul/EcotoxSystems.jl/blob/ad003069221e97ecc2be194a27483c6c35239d9d/src/plotrecipes.jl#L62-L66">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="EcotoxSystems.groupedlineplot-Tuple" href="#EcotoxSystems.groupedlineplot-Tuple"><code>EcotoxSystems.groupedlineplot</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">groupedlineplot(x, y, g, q; estimator)</code></pre><p>Version of lineplot with additional grouping variable <code>g</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SimonHansul/EcotoxSystems.jl/blob/ad003069221e97ecc2be194a27483c6c35239d9d/src/plotrecipes.jl#L62-L66">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="EcotoxSystems.individual_step!-Tuple{EcotoxSystems.AbstractDEBIndividual, EcotoxSystems.AbstractDEBIBM}" href="#EcotoxSystems.individual_step!-Tuple{EcotoxSystems.AbstractDEBIndividual, EcotoxSystems.AbstractDEBIBM}"><code>EcotoxSystems.individual_step!</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">individual_step!(a::Agent, m::Model)::Nothing</code></pre><p>The individual-level model step follows a generic pattern:</p><p>First the ODE-portion of the model is executed, and the corresponding state variables are updated using the Euler scheme. </p><p>Then the rule-based portion of the model is executed. These are all the functions which cannot / should not be expressed as part of an ODE. At the minimum, this will include life stage transitions, reproduction and death of individuals. </p><p>For a spatially explicit model, movement should also most likely be part of the rule-based portion,  as well as functions which require direct information exchange between individuals.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SimonHansul/EcotoxSystems.jl/blob/ad003069221e97ecc2be194a27483c6c35239d9d/src/ibmschedules.jl#L32-L44">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="EcotoxSystems.initialize_global_statevars-Tuple{ComponentArrays.ComponentVector}" href="#EcotoxSystems.initialize_global_statevars-Tuple{ComponentArrays.ComponentVector}"><code>EcotoxSystems.initialize_global_statevars</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">initialize_global_statevars(p::ComponentVector)</code></pre><p>Function to initialize global state variables.  In the default model, these are the resource abundance <code>X</code>,  external chemical stressor concentration <code>C_W</code> and population size <code>N</code>. </p><p>Global state variables can be extended, modified or replaced in the same way as individual-level state variables. </p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SimonHansul/EcotoxSystems.jl/blob/ad003069221e97ecc2be194a27483c6c35239d9d/src/default_statevars.jl#L116-L124">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="EcotoxSystems.initialize_individual_statevars-Tuple{ComponentArrays.ComponentVector}" href="#EcotoxSystems.initialize_individual_statevars-Tuple{ComponentArrays.ComponentVector}"><code>EcotoxSystems.initialize_individual_statevars</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">initialize_individual_statevars(
    p::ComponentVector; 
    id = 1., 
    cohort = 0.)::ComponentVector</code></pre><p>This function defines the individual-level state variables and their initial values for the default model. </p><p><code>p</code> is a parameter vector containing all components which are relevant for this simulation (including global state varaiables).</p><p><code>id</code> is an individual&#39;s unique identifier in the IBM simulation. </p><p><code>cohort</code>is the index of the cohort an indvidiual belongs to in the IBM simulation (i.e. initial generation is cohort 0,  their offsrping is cohort 1, etc.)</p><p>To add state variables or overwrite the default initial value, one can define a wrapper around this function: </p><pre><code class="language-Julia hljs">using ComponentArrays

custom_ind_statevars(p; kwargs...) = ComponentVector(
    EcotoxSystems.initialize_individual_statevars(); 
    new_statevar = 0.
    )</code></pre><p>For IBM simulations, the new function <code>custom_ind_statevars</code> can be supplied as keyword-argument  <code>init_individual_statevars</code> to <code>IBM_simulator</code>:</p><pre><code class="language-Julia hljs">sim = IBM_simulator(p; init_individual_statevars = custom_ind_statevars)</code></pre><p>For the ODE, simulator, the state variables for all components are initialized simultaneously,  and this function does not take any additional keyword-arguments: </p><pre><code class="language-Julia hljs">custom_statevars(p) = ComponentVector( # state variables for some completely new model
    glb = initialize_global_statevars(p),
    spc = custom_ind_statevars(p)
)</code></pre><p>Alternatively, the custom <code>ComponentVector</code> can of course be defined <em>from scratch</em> in the new initialization functions for state variables: </p><pre><code class="language-Julia hljs">custom_statevars(p) = ComponentVector( # state variables for some completely new model
    glb = ComponentVector(t_max = 10., C_W = 0.),
    spc = ComponentVector(N = 1.)
)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SimonHansul/EcotoxSystems.jl/blob/ad003069221e97ecc2be194a27483c6c35239d9d/src/default_statevars.jl#L17-L68">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="EcotoxSystems.initialize_statevars-Tuple{ComponentArrays.ComponentVector}" href="#EcotoxSystems.initialize_statevars-Tuple{ComponentArrays.ComponentVector}"><code>EcotoxSystems.initialize_statevars</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">initialize_statevars(p::ComponentVector)::ComponentVector</code></pre><p>For initialization of ODE simulator, initialize the component vector of state variables, <code>u</code>, based on common oaraeter collection <code>p</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SimonHansul/EcotoxSystems.jl/blob/ad003069221e97ecc2be194a27483c6c35239d9d/src/default_statevars.jl#L133-L137">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="EcotoxSystems.k_J!-Tuple{ComponentArrays.ComponentVector}" href="#EcotoxSystems.k_J!-Tuple{ComponentArrays.ComponentVector}"><code>EcotoxSystems.k_J!</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">k_J!(spc::ComponentVector)::Nothing</code></pre><p>Set the maturity maintenance rate constant,  assuming that the cumulative investment into maturity maintenance  equals the cumulative investment into somatic maintenance (cf. DEBkiss book by Tjalling Jager).</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SimonHansul/EcotoxSystems.jl/blob/ad003069221e97ecc2be194a27483c6c35239d9d/src/traits.jl#L20-L26">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="EcotoxSystems.lineplot!-Tuple" href="#EcotoxSystems.lineplot!-Tuple"><code>EcotoxSystems.lineplot!</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">lineplot(x, y, q; estimator)</code></pre><p>Plot aggregated values of <code>y</code> over <code>x</code>. Similar to <code>seaborn.lineplot</code>. By default, the arithmetic mean of <code>y</code> for every value of <code>x</code> is plotted,  with 5th to 95th percentiles as ribbon.  The plotted percentile range can be controlled via the positional argument <code>q</code>, which is a two-element Tuple. The arithmetic mean can be replaced with another function via the <code>estimator</code> argument. </p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SimonHansul/EcotoxSystems.jl/blob/ad003069221e97ecc2be194a27483c6c35239d9d/src/plotrecipes.jl#L17-L25">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="EcotoxSystems.lineplot!-Tuple{RecipesBase.AbstractPlot, Vararg{Any}}" href="#EcotoxSystems.lineplot!-Tuple{RecipesBase.AbstractPlot, Vararg{Any}}"><code>EcotoxSystems.lineplot!</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">lineplot(x, y, q; estimator)</code></pre><p>Plot aggregated values of <code>y</code> over <code>x</code>. Similar to <code>seaborn.lineplot</code>. By default, the arithmetic mean of <code>y</code> for every value of <code>x</code> is plotted,  with 5th to 95th percentiles as ribbon.  The plotted percentile range can be controlled via the positional argument <code>q</code>, which is a two-element Tuple. The arithmetic mean can be replaced with another function via the <code>estimator</code> argument. </p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SimonHansul/EcotoxSystems.jl/blob/ad003069221e97ecc2be194a27483c6c35239d9d/src/plotrecipes.jl#L17-L25">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="EcotoxSystems.lineplot-Tuple" href="#EcotoxSystems.lineplot-Tuple"><code>EcotoxSystems.lineplot</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">lineplot(x, y, q; estimator)</code></pre><p>Plot aggregated values of <code>y</code> over <code>x</code>. Similar to <code>seaborn.lineplot</code>. By default, the arithmetic mean of <code>y</code> for every value of <code>x</code> is plotted,  with 5th to 95th percentiles as ribbon.  The plotted percentile range can be controlled via the positional argument <code>q</code>, which is a two-element Tuple. The arithmetic mean can be replaced with another function via the <code>estimator</code> argument. </p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SimonHansul/EcotoxSystems.jl/blob/ad003069221e97ecc2be194a27483c6c35239d9d/src/plotrecipes.jl#L17-L25">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="EcotoxSystems.link_params!" href="#EcotoxSystems.link_params!"><code>EcotoxSystems.link_params!</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">link_params!(p::ComponentVector, links::NamedTuple = (spc = linkfun,))::Nothing</code></pre><p>Apply functions to link parameters. &lt;br&gt;</p><ul><li><code>p</code>: ComponentVector containing parameters</li><li><code>links</code>: Component-specific functions to define links between parameters. </li></ul><p><strong>Examples</strong></p><p>We can apply the link before running a simulation, in which case the link is applied to the <code>spc</code> component  (species-level parameters).-</p><pre><code class="language-Julia hljs">

link_ind_params!(p) = begin
    p.k_J_emb = (1-p.kappa_emb)/p.kappa_emb * p.k_M_emb
end

p = deepcopy(defaultparams)
link_params!(p, (spc = link_ind_params!,) # apply link ahead of simulation </code></pre><p>Alternatively, we provide the links as a keyword argument to <code>ODE_simulator</code>,  in which case the link is applied to the <code>ind</code> component. &lt;br&gt; This is useful if one of the parameters involved in the link is subject to individual variability,  and we need to update the link for each simulated individual. &lt;br&gt;</p><pre><code class="language-Julia hljs">
sim = ODE_simulator(p, param_links = (ind = link_ind_params!,))</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SimonHansul/EcotoxSystems.jl/blob/ad003069221e97ecc2be194a27483c6c35239d9d/src/default_params.jl#L125-L158">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="EcotoxSystems.model_step!-Tuple{EcotoxSystems.AbstractDEBIBM}" href="#EcotoxSystems.model_step!-Tuple{EcotoxSystems.AbstractDEBIBM}"><code>EcotoxSystems.model_step!</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">model_step!(m::AbstractDEBIBM)::Nothing</code></pre><p>Generic definition of an individual-based model step.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SimonHansul/EcotoxSystems.jl/blob/ad003069221e97ecc2be194a27483c6c35239d9d/src/ibmschedules.jl#L140-L144">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="EcotoxSystems.params-Tuple{}" href="#EcotoxSystems.params-Tuple{}"><code>EcotoxSystems.params</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">params(;kwargs...) = ComponentVector(defaultparams; kwargs...)</code></pre><p>Initialize the default parameter set, modifying and/or adding parameter with kwargs. </p><p><strong>Examples</strong></p><pre><code class="language-Julia hljs">
# simulate the default parameters
p = params()
sim = ODE_simulator(p)  

# simulate the default parameters, but modify kappa
p = params(kappa = 0.5) 
sim = ODE_simulator

# simulate the default parameters with individual variabilty in kappa
p = params(kappa = truncated(Normal(0.5, 0.1), 0, 1))
sim = @replicates ODE_simulator(p) 10</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SimonHansul/EcotoxSystems.jl/blob/ad003069221e97ecc2be194a27483c6c35239d9d/src/default_params.jl#L65-L87">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="EcotoxSystems.record_global!-Tuple{EcotoxSystems.AbstractDEBIBM}" href="#EcotoxSystems.record_global!-Tuple{EcotoxSystems.AbstractDEBIBM}"><code>EcotoxSystems.record_global!</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">record_global!(m::AbstractDEBIBM)::Nothing</code></pre><p>Store global state variables in <code>m.global_record</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SimonHansul/EcotoxSystems.jl/blob/ad003069221e97ecc2be194a27483c6c35239d9d/src/ibmschedules.jl#L87-L91">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="EcotoxSystems.record_individual!-Tuple{EcotoxSystems.AbstractDEBIndividual, EcotoxSystems.AbstractDEBIBM}" href="#EcotoxSystems.record_individual!-Tuple{EcotoxSystems.AbstractDEBIndividual, EcotoxSystems.AbstractDEBIBM}"><code>EcotoxSystems.record_individual!</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">record_individual!(a::AbstractDEBIndividual, m::AbstractDEBIBM)::Nothing</code></pre><p>Store individual-level state variables in <code>m.individual_record</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SimonHansul/EcotoxSystems.jl/blob/ad003069221e97ecc2be194a27483c6c35239d9d/src/ibmschedules.jl#L69-L73">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="EcotoxSystems.relative_response-Union{Tuple{D}, Tuple{D, Vector{Symbol}, Symbol}} where D&lt;:DataFrames.AbstractDataFrame" href="#EcotoxSystems.relative_response-Union{Tuple{D}, Tuple{D, Vector{Symbol}, Symbol}} where D&lt;:DataFrames.AbstractDataFrame"><code>EcotoxSystems.relative_response</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">relative_response(
    sim::D, 
    response_vars::Vector{Symbol},
    treatment_var::Symbol; 
    groupby_vars::Vector{Symbol} = Symbol[],
    identify_control = minimum
    ) where D &lt;: AbstractDataFrame</code></pre><p>Calculate relative responses. </p><p>args:</p><ul><li><code>sim::AbstractDataFrame</code>: results</li><li><code>response_vars::Vector{Symbol}</code>: response variables for which to calculate the relative responses</li><li><code>treatment_var::Symbol</code>: Column indicating the treatment. Column values can be numerical or categorical, but <code>identify_control</code> kwarg has to be specified in the latter case</li></ul><p>kwargs:</p><ul><li><code>groupby_vars::Vector{Symbol}</code>: relative response will be conditioned on these variables (e.g. time, separate experiments...). Empty by default.</li><li><code>identify_control</code>: function used to identify reference values from <code>treatment_var</code>. By default, this is <code>minimum()</code> (assuming that column values in <code>treatment_var</code> are numerical).</li></ul><hr/><p><strong>Example</strong></p><pre><code class="language-Julia hljs">using MechanisticEffectModels.EcotoxSystems, MechanisticEffectModels.Utils

simfunct(x) = @replicates EcotoxSystems.simulator(x) 10

sim = exposure(simfunct, Params(), [0., 100., 200.]) |&gt;
x -&gt; relative_response(x, [:S, :H, :R]) # -&gt; data frame will contain columns y_S, y_H, y_R for control-normalized values</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SimonHansul/EcotoxSystems.jl/blob/ad003069221e97ecc2be194a27483c6c35239d9d/src/utils.jl#L69-L105">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="EcotoxSystems.replicates-Tuple{Function, ComponentArrays.ComponentVector, Int64}" href="#EcotoxSystems.replicates-Tuple{Function, ComponentArrays.ComponentVector, Int64}"><code>EcotoxSystems.replicates</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">replicates(simulator::Function, defaultparams::ComponentVector, nreps::Int64; kwargs...)</code></pre><p>Perform replicated runs of <code>simulator</code> with parameters <code>defaultparams</code> (<code>simulator(defaultparams)</code> has to be a valid function call).  Analogous to <code>@replicates</code>, but a bit more flexible.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SimonHansul/EcotoxSystems.jl/blob/ad003069221e97ecc2be194a27483c6c35239d9d/src/simulators.jl#L228-L233">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="EcotoxSystems.set_global_statevars!-Tuple{EcotoxSystems.AbstractDEBIBM, EcotoxSystems.AbstractDEBIndividual}" href="#EcotoxSystems.set_global_statevars!-Tuple{EcotoxSystems.AbstractDEBIBM, EcotoxSystems.AbstractDEBIndividual}"><code>EcotoxSystems.set_global_statevars!</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">set_global_statevars!(m::AbstractDEBIBM, a::AbstractDEBIndividual)::Nothing</code></pre><p>Update global state variables and derivatives based on individual-level model step.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SimonHansul/EcotoxSystems.jl/blob/ad003069221e97ecc2be194a27483c6c35239d9d/src/ibmschedules.jl#L19-L23">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="EcotoxSystems.sig-NTuple{4, Float64}" href="#EcotoxSystems.sig-NTuple{4, Float64}"><code>EcotoxSystems.sig</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">sig(
    x::Real, 
    x_thr::Real,
    y_left::Real, 
    y_right::Real; 
    beta::Real = 30
    )::Real</code></pre><p>Sigmoid switch function.  Used to replace simple if-statements with a continuous function in ODE models. </p><p><code>y_left</code> and <code>y_right</code> are the function values left and right of the threshold <code>x_thr</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SimonHansul/EcotoxSystems.jl/blob/ad003069221e97ecc2be194a27483c6c35239d9d/src/default_derivatives.jl#L4-L18">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="EcotoxSystems.texposure-Tuple{Function, ComponentArrays.ComponentVector, Vector{Float64}}" href="#EcotoxSystems.texposure-Tuple{Function, ComponentArrays.ComponentVector, Vector{Float64}}"><code>EcotoxSystems.texposure</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>Threaded version of <code>exposure()</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SimonHansul/EcotoxSystems.jl/blob/ad003069221e97ecc2be194a27483c6c35239d9d/src/simulators.jl#L356-L358">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="EcotoxSystems.treplicates-Tuple{Function, ComponentArrays.ComponentVector, Int64}" href="#EcotoxSystems.treplicates-Tuple{Function, ComponentArrays.ComponentVector, Int64}"><code>EcotoxSystems.treplicates</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">treplicates(
    simulator::Function, 
    defaultparams::ComponentVector, 
    nreps::Int64; 
    kwargs...)</code></pre><p>Multi-threaded version of <code>replicates</code>. </p><p>Only useful if Julia has been started with multiple threads. </p><p>To check the number of threads, run  <code>using Base.Threads; Threads.nthreads()</code>.</p><p>In VSCode, you can use the entry &quot;julia.NumThreads&quot; in settings.json to set the default number of threads  (searching for &quot;julia threads&quot; in the preferences will lead you there). </p><p>Check the <a href="https://docs.julialang.org/en/v1/manual/multi-threading/">Multi-threading documentation</a>  for more information.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SimonHansul/EcotoxSystems.jl/blob/ad003069221e97ecc2be194a27483c6c35239d9d/src/simulators.jl#L245-L265">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="EcotoxSystems.@replicates-Tuple{Expr, Int64}" href="#EcotoxSystems.@replicates-Tuple{Expr, Int64}"><code>EcotoxSystems.@replicates</code></a> — <span class="docstring-category">Macro</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">@replicates(simcall::Expr, nreps::Int64)</code></pre><p>Perform replicated runs of <code>simcall</code>, where <code>simcall</code> is a call to a simulator function. </p><p>Example:</p><pre><code class="language-Julia hljs">    spc = SpeciesParams(Z = Truncated(Normal(1, 0.1), 0, Inf)) # initialize default parameters with variable zoom factor
    sim = @replicates MechanisticEffectModels.simulator(Params(spc = spc))) 10 # execute replicated runs to simulator</code></pre><p>In this case, <code>sim</code> will contain the output of 10 replicated simulations. For each replicate, the zoom factor is sampled from a truncated Normal distribution.  <code>sim</code> contains an additional column <code>replicate</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SimonHansul/EcotoxSystems.jl/blob/ad003069221e97ecc2be194a27483c6c35239d9d/src/simulators.jl#L200-L214">source</a></section></article></article><nav class="docs-footer"><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.7.0 on <span class="colophon-date" title="Tuesday 15 April 2025 12:32">Tuesday 15 April 2025</span>. Using Julia version 1.11.5.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
